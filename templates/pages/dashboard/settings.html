{% extends 'pages/dashboard/base.html' %}

{% block title %}Settings{% endblock %}
{% block page_title %}Settings{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto space-y-6">
    <!-- Profile Section -->
    <section class="dashboard-card animate-fade-in-up">
        <h3 class="section-header">Profile Information</h3>
        
        <form method="post" class="space-y-5">
            {% csrf_token %}
            
            <div class="grid md:grid-cols-2 gap-5">
                <div>
                    <label class="block text-sm font-medium text-zinc-400 mb-2">Username</label>
                    <input 
                        type="text" 
                        name="username" 
                        value="{{ user.username }}"
                        disabled
                        class="w-full bg-zinc-900 border border-zinc-800 rounded-lg px-4 py-3 text-zinc-500 cursor-not-allowed"
                    >
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-zinc-400 mb-2">Email</label>
                    <input 
                        type="email" 
                        name="email" 
                        value="{{ user.email }}"
                        class="w-full bg-zinc-950 border border-zinc-800 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-zinc-600 transition-colors"
                    >
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-zinc-400 mb-2">First Name</label>
                    <input 
                        type="text" 
                        name="first_name" 
                        value="{{ user.first_name }}"
                        class="w-full bg-zinc-950 border border-zinc-800 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-zinc-600 transition-colors"
                        placeholder="Enter first name"
                    >
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-zinc-400 mb-2">Last Name</label>
                    <input 
                        type="text" 
                        name="last_name" 
                        value="{{ user.last_name }}"
                        class="w-full bg-zinc-950 border border-zinc-800 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-zinc-600 transition-colors"
                        placeholder="Enter last name"
                    >
                </div>
            </div>
            
            <div class="pt-4 border-t border-zinc-800">
                <button type="submit" class="btn-primary">
                    Save Changes
                </button>
            </div>
        </form>
    </section>

    <!-- Company Section -->
    <section class="dashboard-card animate-fade-in-up animation-delay-100">
        <h3 class="section-header">Company Information</h3>
        
        <form method="post" class="space-y-5">
            {% csrf_token %}
            
            <div class="grid md:grid-cols-2 gap-5">
                <div>
                    <label class="block text-sm font-medium text-zinc-400 mb-2">Company Name</label>
                    <input 
                        type="text" 
                        name="company_name" 
                        value="{{ user.company_name }}"
                        class="w-full bg-zinc-950 border border-zinc-800 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-zinc-600 transition-colors"
                        placeholder="Your Company Ltd"
                    >
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-zinc-400 mb-2">Job Title</label>
                    <input 
                        type="text" 
                        name="job_title" 
                        value="{{ user.job_title }}"
                        class="w-full bg-zinc-950 border border-zinc-800 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-zinc-600 transition-colors"
                        placeholder="IT Manager"
                    >
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-zinc-400 mb-2">Company Size</label>
                    <select name="company_size" class="w-full bg-zinc-950 border border-zinc-800 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-zinc-600 transition-colors">
                        <option value="">Select size</option>
                        <option value="1-10" {% if user.company_size == "1-10" %}selected{% endif %}>1-10 employees</option>
                        <option value="11-50" {% if user.company_size == "11-50" %}selected{% endif %}>11-50 employees</option>
                        <option value="51-200" {% if user.company_size == "51-200" %}selected{% endif %}>51-200 employees</option>
                        <option value="200+" {% if user.company_size == "200+" %}selected{% endif %}>200+ employees</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-zinc-400 mb-2">Industry</label>
                    <input 
                        type="text" 
                        name="industry" 
                        value="{{ user.industry }}"
                        class="w-full bg-zinc-950 border border-zinc-800 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-zinc-600 transition-colors"
                        placeholder="Technology"
                    >
                </div>
            </div>
            
            <div class="pt-4 border-t border-zinc-800">
                <button type="submit" class="btn-primary">
                    Save Changes
                </button>
            </div>
        </form>
    </section>

    <!-- Subscription Section -->
    <section class="dashboard-card animate-fade-in-up animation-delay-200">
        <h3 class="section-header">Subscription</h3>
        
        <div class="flex items-center justify-between p-4 rounded-lg {% if user.is_pro %}bg-zinc-800 border border-zinc-700{% else %}bg-zinc-900/50 border border-zinc-800{% endif %}">
            <div>
                <div class="flex items-center gap-2 mb-1">
                    <span class="font-medium text-white">{{ user.get_subscription_tier_display }}</span>
                    {% if user.is_pro %}
                    <span class="text-[10px] bg-white text-zinc-900 px-2 py-0.5 rounded font-semibold">ACTIVE</span>
                    {% endif %}
                </div>
                <div class="text-sm text-zinc-500">
                    {% if user.is_pro %}
                    Expires: {{ user.subscription_expires|date:"F j, Y" }}
                    {% else %}
                    Upgrade to unlock all Pro features
                    {% endif %}
                </div>
            </div>
            {% if not user.is_pro %}
            <a href="{% url 'core:pricing' %}" class="btn-primary text-sm">
                Upgrade to Pro
            </a>
            {% endif %}
        </div>
    </section>

    <!-- Danger Zone -->
    <section class="dashboard-card animate-fade-in-up animation-delay-300 border-zinc-700">
        <h3 class="text-sm font-semibold text-zinc-400 mb-4">Danger Zone</h3>
        <p class="text-sm text-zinc-500 mb-4">
            Once you delete your account, there is no going back. Please be certain.
        </p>
        <button class="px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-zinc-300 rounded-lg text-sm font-medium transition-colors border border-zinc-700">
            Delete Account
        </button>
    </section>
</div>
{% endblock %}
